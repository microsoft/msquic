<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta property="og:title" content="MsQuic Performance Dashboard" />
    <meta property="og:description" content="The latest MsQuic performance data" />
    <meta name="description" content="The latest MsQuic performance data" />
    <meta name="keywords" content=", github, microsoft, quic, performance" />
    <link rel="icon" href="./assets/summary/favicon.png">
    <title>
        MsQuic Performance Dashboard
    </title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@1.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@0.7.7"></script>
    <script src="./assets/summary/main/data.js"></script>
    <script src="./assets/summary/dataTemplate.js"></script>
    <link rel="stylesheet" href="./assets/summary/style.css"/>
</head>

<body>
    <div class="sidebar">
        <br>
        <b class="centered">Platforms</b>
        <label class="platform-label" for="Windows Kernel">Windows Kernel</label>

        <label class="switch">
            <input class="kernel" type="checkbox" id="Windows Kernel" checked="true">
            <span class="slider kernel"></span>
        </label>

        <label class="platform-label" for="Windows User Schannel">Windows User Schannel</label>
        <label class="switch">
            <input class="winschannel" type="checkbox" id="Windows User Schannel" checked="true">
            <span class="slider winschannel"></span>
        </label>

        <label class="platform-label" for="Windows User OpenSSL">Windows User OpenSSL</label>
        <label class="switch">
            <input class="winopenssl" type="checkbox" id="Windows User OpenSSL" checked="true">
            <span class="slider winopenssl"></span>
        </label>
        <br>
        <br>
        <br>
        <b class="centered">Data Points</b>
        <div>
            <input type="radio" id="rawpdt" name="pointDisplayType" value="raw">
            <label for="rawpdt">Raw Points</label><br>
            <input type="radio" id="avgpdt" name="pointDisplayType" value="avg" checked="true">
            <label for="avgpdt">Average Line</label><br>
            <input type="radio" id="bothpdt" name="pointDisplayType" value="both">
            <label for="bothpdt">Both</label>
        </div>
    </div>
    <div style="margin-left: 180px; width: 80%;">
        <h1>MsQuic Performance Dashboard</h1>
        <p>
            This page shows performance-related data for MsQuic and is automatically
            generated by our
            <a href="https://dev.azure.com/ms/msquic/_build?definitionId=347&_a=summary&branchFilter=23351%2C23351%2C23351%2C23351%2C23351%2C23351">CI pipeline</a>.
            The sidebar at the left can be used to toggle different options on and
            off.
        </p>
        <div>
            <div class="summary-graph-outer">
                <div class="summary-graph">
                    <canvas style="height: 380px;" id="canvasThroughputSummary" class="chartjs-render-monitor"></canvas>
                </div>
            </div>
            <div class="summary-graph-outer">
                <div class="summary-graph">
                    <canvas style="height: 380px;" id="canvasThroughputDownSummary" class="chartjs-render-monitor"></canvas>
                </div>
            </div>
            <div class="summary-graph-outer">
                <div class="summary-graph">
                    <canvas style="height: 380px;" id="canvasRPSSummary" class="chartjs-render-monitor"></canvas>
                </div>
            </div>
            <div class="summary-graph-outer">
                <div class="summary-graph">
                    <canvas style="height: 380px;" id="canvasHPSSummary" class="chartjs-render-monitor"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div style="margin-left: 180px; width: 80%;">
        <h2>CPU Limited Tests</h2>
        <p>
            Data is shown for several different build configurations and
            scenarios. Scenarios are described
            <a href="https://tools.ietf.org/html/draft-banks-quic-performance-00">here</a>.
            Each dataset comes from a particular OS/platform (Windows Kernel,
            Windows User, Linux User) and TLS library (Schannel, OpenSSL). The
            tests are run on two physical machines connected by a 50Gbps switch
            (with 40Gbps NICs), so the tests are assumed to be limited by the CPU
            rather than a network bottleneck.
        </p>
        <h3>Single Connection Throughput</h3>
        <p>
            This test consists of transferring data over a single QUIC connection
            with a single stream in one direction as fast as possible. The metric
            is the average application throughput
            (<a href="https://en.wikipedia.org/wiki/Goodput">goodput</a>) over
            the lifetime of the connection.
        </p>
        <h4>Client Upload</h4>
        <div class="graph">
            <canvas id="canvasThroughput" class="chartjs-render-monitor"></canvas>
        </div>
        <h4>Client Download</h4>
        <div class="graph">
            <canvas id="canvasThroughputDown" class="chartjs-render-monitor"></canvas>
        </div>
        <h3>Requests per Second</h3>
        <p>
            This test creates many parallel connections and sends requests (and
            waits for the responses) as fast as possible. The test measures the
            average number of responses received per second over the test run.
        </p>
        <div class="graph">
            <canvas id="canvasRPS" class="chartjs-render-monitor"></canvas>
        </div>
        <h3>Requests Per Second Latency</h3>
        <p>
            This displays latency results in microseconds in a histogram of
            percentiles from the last RPS run. This is computed by using the
            latency time of every request during the RPS run that computed the
            above graph.
        </p>
        <div class="graph">
            <canvas id="canvasRPSLatency" class="chartjs-render-monitor"></canvas>
        </div>
        <h3>Handshakes per Second</h3>
        <p>
            This test creates new connections (handshakes) as fast as possible
            The test measures the average handshake completion rate over the
            test run.
        </p>
        <div class="graph">
            <canvas id="canvasHPS" class="chartjs-render-monitor"></canvas>
        </div>
        <h2>Network Limited Tests</h2>
        <p>
            Coming soon!
        </p>
    </div>
</body>
</html>
