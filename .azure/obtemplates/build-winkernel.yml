parameters:
  config: ''
  signing: false

jobs:
- job: build_kernel_${{ parameters.config }}
  displayName: Kernel ${{ parameters.config }}
  pool:
    type: windows
  variables:
    ob_outputDirectory: $(Build.SourcesDirectory)\artifacts\bin\winkernel
    ob_sdl_binskim_break: true # https://aka.ms/obpipelines/sdl
  steps:
  - checkout: self
  - script: scripts\build-kernel.cmd ${{ parameters.config }} x64
    displayName: x64
  - script: scripts\build-kernel.cmd ${{ parameters.config }} x86
    displayName: x86
  - script: scripts\build-kernel.cmd ${{ parameters.config }} ARM
    displayName: ARM
  - script: scripts\build-kernel.cmd ${{ parameters.config }} ARM64
    displayName: ARM64
