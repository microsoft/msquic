# Downloads the build artifacts for a single build configuration.

parameters:
  platform: ''
  arch: ''
  tls: ''

steps:
- task: DownloadBuildArtifacts@0
  displayName: Download Build Artifacts
  inputs:
    artifactName: bin
    itemPattern: bin/${{ parameters.platform }}/${{ parameters.arch }}_*_${{ parameters.tls }}/**
    downloadPath: artifacts

- task: DownloadBuildArtifacts@0
  displayName: Download CLOG Artifacts
  inputs:
    artifactName: bin
    itemPattern: bin/clog/**
    downloadPath: $(Agent.TempDirectory)

- task: PowerShell@2
  displayName: Install Build Artifacts
  inputs:
    pwsh: true
    filePath: scripts/install-build-artifacts.ps1
    arguments: -Arch ${{ parameters.arch }} -Tls ${{ parameters.tls }}
