# This template contains steps to sync the GitHub repo to the AzDO mirror repo.

parameters:
  branch: 'master'

jobs:
- job: mirror_${{ parameters.branch }}
  displayName: Mirror ${{ parameters.branch }} branch
  pool:
    vmImage: windows-latest
  steps:
  - checkout: self
    persistCredentials: true

  - task: PowerShell@2
    displayName: Sync Changes to AzDO Mirror Branch
    inputs:
      pwsh: true
      filePath: .azure/scripts/sync-mirror.ps1
      arguments: -Branch ${{ parameters.branch }}
    env:
      AzDO_PAT: $(AzDO_PAT)
    continueOnError: true
