#
# Builds all Windows configurations.
#

jobs:

# Windows user mode

- template: ./build-single-config.yml
  parameters:
    image: windows-latest
    platform: windows
    arch: x86
    tls: schannel

- template: ./build-single-config.yml
  parameters:
    image: windows-latest
    platform: windows
    arch: x64
    tls: schannel

# Build currently fails at linker stage.
#- template: ./build-single-config.yml
#  parameters:
#    image: windows-latest
#    platform: windows
#    arch: arm
#    tls: schannel

# Build currently fails at linker stage.
#- template: ./build-single-config.yml
#  parameters:
#    image: windows-latest
#    platform: windows
#    arch: arm64
#    tls: schannel

- template: ./build-single-config.yml
  parameters:
    image: windows-latest
    platform: windows
    arch: x64
    tls: stub

- template: ./build-single-config.yml
  parameters:
    image: windows-latest
    platform: windows
    arch: x64
    tls: mitls

# Windows kernel mode

- template: ./build-winkernel.yml
  parameters:
    arch: x64

- template: ./build-winkernel.yml
  parameters:
    arch: x86

- template: ./build-winkernel.yml
  parameters:
    arch: arm

- template: ./build-winkernel.yml
  parameters:
    arch: arm64
