/* 
  This file was generated by KaRaMeL <https://github.com/FStarLang/karamel>
  KaRaMeL invocation: /home/eioannidis/karamel/krml -skip-compilation -skip-makefiles -skip-linking -bundle RecvBufferWrapper=RecvBufferWrapper,Pulse.Lib.CircularBuffer,Pulse.Lib.CircularBuffer.*,Pulse.Lib.RangeVec,Pulse.Lib.RangeMap.Spec -library Pulse.Lib.Vector -warn-error -15 -warn-error -4 -warn-error -2 -warn-error -26 -warn-error -18 -warn-error -9 -warn-error -17 -warn-error -1 -warn-error -5 -warn-error -11 -warn-error -13 -tmpdir _new_c_output /home/eioannidis/karamel/krmllib/.extract/C_Endianness.krml /home/eioannidis/karamel/krmllib/.extract/C_Failure.krml /home/eioannidis/karamel/krmllib/.extract/C.krml /home/eioannidis/karamel/krmllib/.extract/C_Loops.krml /home/eioannidis/karamel/krmllib/.extract/C_String.krml /home/eioannidis/karamel/krmllib/.extract/FStar_All.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Attributes.krml /home/eioannidis/karamel/krmllib/.extract/FStar_BigOps.krml /home/eioannidis/karamel/krmllib/.extract/FStar_BitVector.krml /home/eioannidis/karamel/krmllib/.extract/FStar_BV.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Bytes.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Calc.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Char.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Classical.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Classical_Sugar.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Date.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Dyn.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Endianness.krml /home/eioannidis/karamel/krmllib/.extract/FStar_ErasedLogic.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Exn.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Float.krml /home/eioannidis/karamel/krmllib/.extract/FStar_FunctionalExtensionality.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Ghost.krml /home/eioannidis/karamel/krmllib/.extract/FStar_GSet.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Heap.krml /home/eioannidis/karamel/krmllib/.extract/FStar_HyperStack_All.krml /home/eioannidis/karamel/krmllib/.extract/FStar_HyperStack_IO.krml /home/eioannidis/karamel/krmllib/.extract/FStar_HyperStack.krml /home/eioannidis/karamel/krmllib/.extract/FStar_HyperStack_ST.krml /home/eioannidis/karamel/krmllib/.extract/FStar_IndefiniteDescription.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Int16.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Int32.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Int64.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Int8.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Int_Cast_Full.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Int_Cast.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Int.krml /home/eioannidis/karamel/krmllib/.extract/FStar_IO.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Issue.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Krml_Endianness.krml /home/eioannidis/karamel/krmllib/.extract/FStar_List.krml /home/eioannidis/karamel/krmllib/.extract/FStar_List_Tot_Base.krml /home/eioannidis/karamel/krmllib/.extract/FStar_List_Tot.krml /home/eioannidis/karamel/krmllib/.extract/FStar_List_Tot_Properties.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Map.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Math_Lemmas.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Math_Lib.krml /home/eioannidis/karamel/krmllib/.extract/FStar_ModifiesGen.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Monotonic_Heap.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Monotonic_HyperHeap.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Monotonic_HyperStack.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Monotonic_Pure.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Monotonic_Witnessed.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Mul.krml /home/eioannidis/karamel/krmllib/.extract/FStar_NormSteps.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Order.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Pervasives.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Pervasives_Native.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Pprint.krml /home/eioannidis/karamel/krmllib/.extract/FStar_PredicateExtensionality.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Prelude.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Preorder.krml /home/eioannidis/karamel/krmllib/.extract/FStar_PropositionalExtensionality.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Range.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Sealed_Inhabited.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Sealed.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Seq_Base.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Seq.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Seq_Properties.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Set.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Squash.krml /home/eioannidis/karamel/krmllib/.extract/FStar_ST.krml /home/eioannidis/karamel/krmllib/.extract/FStar_String.krml /home/eioannidis/karamel/krmllib/.extract/FStar_StrongExcludedMiddle.krml /home/eioannidis/karamel/krmllib/.extract/FStar_TSet.krml /home/eioannidis/karamel/krmllib/.extract/FStar_UInt128.krml /home/eioannidis/karamel/krmllib/.extract/FStar_UInt16.krml /home/eioannidis/karamel/krmllib/.extract/FStar_UInt32.krml /home/eioannidis/karamel/krmllib/.extract/FStar_UInt64.krml /home/eioannidis/karamel/krmllib/.extract/FStar_UInt8.krml /home/eioannidis/karamel/krmllib/.extract/FStar_UInt.krml /home/eioannidis/karamel/krmllib/.extract/FStar_Universe.krml /home/eioannidis/karamel/krmllib/.extract/LowStar_Buffer.krml /home/eioannidis/karamel/krmllib/.extract/LowStar_BufferOps.krml /home/eioannidis/karamel/krmllib/.extract/LowStar_Endianness.krml /home/eioannidis/karamel/krmllib/.extract/LowStar_Failure.krml /home/eioannidis/karamel/krmllib/.extract/LowStar_Lib_AssocList.krml /home/eioannidis/karamel/krmllib/.extract/LowStar_Lib_LinkedList2.krml /home/eioannidis/karamel/krmllib/.extract/LowStar_Lib_LinkedList.krml /home/eioannidis/karamel/krmllib/.extract/LowStar_Modifies.krml /home/eioannidis/karamel/krmllib/.extract/LowStar_Monotonic_Buffer.krml /home/eioannidis/karamel/krmllib/.extract/LowStar_Printf.krml /home/eioannidis/karamel/krmllib/.extract/Spec_Loops.krml /home/eioannidis/karamel/krmllib/.extract/TestLib.krml /home/eioannidis/karamel/krmllib/.extract/WasmSupport.krml _output/Pulse_Lib_CircularBuffer_GapTrack.krml _output/Pulse_Lib_CircularBuffer.krml _output/Pulse_Lib_CircularBuffer_Modular.krml _output/Pulse_Lib_CircularBuffer_Pow2.krml _output/Pulse_Lib_CircularBuffer_Spec.krml _output/Pulse_Lib_RangeMap_Spec.krml _output/Pulse_Lib_RangeVec.krml _output/Pulse_Lib_Vector.krml _output/RecvBufferWrapper.krml
  F* version: <unknown>
  KaRaMeL version: a4caa585
 */

#ifndef RecvBufferWrapper_H
#define RecvBufferWrapper_H

#include "krmllib.h"

typedef struct Pulse_Lib_RangeVec_range_s
{
  size_t start;
  size_t len;
}
Pulse_Lib_RangeVec_range;

typedef struct Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range_s
{
  Pulse_Lib_RangeVec_range *arr;
  size_t sz;
  size_t cap;
  Pulse_Lib_RangeVec_range default_val;
}
Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range;

typedef struct Pulse_Lib_CircularBuffer_write_result_s
{
  bool wrote;
  bool new_data_ready;
  bool resize_failed;
}
Pulse_Lib_CircularBuffer_write_result;

typedef struct Pulse_Lib_CircularBuffer_cb_internal_s
{
  uint8_t *buf;
  size_t rs;
  size_t al;
  size_t pl;
  size_t vl;
  size_t bo;
}
Pulse_Lib_CircularBuffer_cb_internal;

typedef struct Pulse_Lib_CircularBuffer_read_view_s
{
  uint8_t *arr;
  size_t off1;
  size_t len1;
  size_t off2;
  size_t len2;
}
Pulse_Lib_CircularBuffer_read_view;

typedef struct
K____Pulse_Lib_CircularBuffer_cb_internal___Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range__s
{
  Pulse_Lib_CircularBuffer_cb_internal *fst;
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *snd;
}
K____Pulse_Lib_CircularBuffer_cb_internal___Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range_;

typedef uint8_t RecvBufferWrapper_byte;

typedef Pulse_Lib_CircularBuffer_cb_internal *RecvBufferWrapper_circular_buffer;

typedef Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range
*RecvBufferWrapper_range_vec_t;

typedef Pulse_Lib_CircularBuffer_write_result RecvBufferWrapper_write_result;

typedef Pulse_Lib_CircularBuffer_read_view RecvBufferWrapper_read_view;

K____Pulse_Lib_CircularBuffer_cb_internal___Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range_
RecvBufferWrapper_create(size_t alloc_len, size_t virt_len);

void
RecvBufferWrapper_free(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm
);

size_t
RecvBufferWrapper_read_length(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm
);

size_t
RecvBufferWrapper_get_total_length(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm
);

size_t
RecvBufferWrapper_get_alloc_length(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm
);

bool
RecvBufferWrapper_drain(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm,
  size_t n
);

Pulse_Lib_CircularBuffer_write_result
RecvBufferWrapper_write_buffer(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm,
  size_t abs_offset,
  uint8_t *src,
  size_t write_len
);

void
RecvBufferWrapper_read_buffer(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm,
  uint8_t *dst,
  size_t read_len
);

void
RecvBufferWrapper_resize(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm,
  size_t new_al
);

void
RecvBufferWrapper_set_virtual_length(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm,
  size_t new_vl
);

Pulse_Lib_CircularBuffer_read_view
RecvBufferWrapper_read_zerocopy(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm,
  size_t read_len
);

void
RecvBufferWrapper_release_read(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm,
  Pulse_Lib_CircularBuffer_read_view rv
);

bool
RecvBufferWrapper_drain_after_read(
  Pulse_Lib_CircularBuffer_cb_internal *cb,
  Pulse_Lib_Vector_vector_internal__Pulse_Lib_RangeVec_range *rm,
  Pulse_Lib_CircularBuffer_read_view rv,
  size_t drain_len
);


#define RecvBufferWrapper_H_DEFINED
#endif /* RecvBufferWrapper_H */
